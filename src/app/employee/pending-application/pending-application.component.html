<main id="main">
    <section class="section dashboard">

        <div style="margin-bottom: 10px;">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Vendor Invoice Form
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="applicationForm" class="form-group">

                        <div class="mb-3">
                            <label for="division" class="form-label">Division</label>
                            <input type="text" class="form-control" id="division"
                                [value]="applicationForm.get('division')?.value || ''" readonly>
                        </div>

                        <div class="mb-3 nameOfContractor">
                            <label for="nameOfContractor" class="form-label">Name of the Contractor</label>
                            <input type="text" class="form-control" id="nameOfContractor"
                                [value]="applicationForm.get('nameOfContractor')?.value || ''" readonly>
                        </div>

                        <div class="mb-3 nameOfWork">
                            <label for="nameOfWork" class="form-label">Name of the Work</label>
                            <input type="text" class="form-control" id="nameOfWork"
                                [value]="applicationForm.get('nameOfWork')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="agreementNo" class="form-label">Agreement Number</label>
                            <input type="text" class="form-control" id="agreementNo"
                                [value]="applicationForm.get('agreementNo')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="agreementDate" class="form-label">Agreement Date</label>
                            <input type="text" class="form-control" id="agreementDate"
                                [value]="applicationForm.get('agreementDate')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="dateOfCommencement" class="form-label">Date of Commencement</label>
                            <input type="text" class="form-control" id="dateOfCommencement"
                                [value]="applicationForm.get('dateOfCommencement')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="dateOfCompletion" class="form-label">Date of Completion</label>
                            <input type="text" class="form-control" id="dateOfCompletion"
                                [value]="applicationForm.get('dateOfCompletion')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="agreementValue" class="form-label">Agreement Value (incl. GST)</label>
                            <input type="text" class="form-control" id="agreementValue"
                                [value]="applicationForm.get('agreementValue')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="invoiceNo" class="form-label">Invoice Number</label>
                            <input type="text" class="form-control" id="invoiceNo"
                                [value]="applicationForm.get('invoiceNo')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="billNo" class="form-label">Bill Number</label>
                            <input type="text" class="form-control" id="billNo"
                                [value]="applicationForm.get('billNo')?.value || ''" readonly>
                        </div>

                        <div>
                            <label class="form-label">Bill Amount</label>
                            <input type="text" class="form-control" id="billAmount"
                                [value]="applicationForm.get('billAmount')?.value || ''" readonly>
                        </div>

                        <div>
                            <label class="form-label">Bill GST Percentage</label>
                            <input type="text" class="form-control"
                                [value]="applicationForm.get('billGSTPercentage')?.value || ''" readonly>
                        </div>

                        <div>
                            <label class="form-label">Bill GST Amount</label>
                            <input type="text" class="form-control"
                                [value]="applicationForm.get('billGSTAmount')?.value || ''" readonly>
                        </div>

                        <div>
                            <label class="form-label">Bill Total</label>
                            <input type="text" class="form-control" id="billTotal"
                                [value]="applicationForm.get('billTotal')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="pan" class="form-label">PAN</label>
                            <input type="text" class="form-control" id="pan"
                                [value]="applicationForm.get('pan')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="tan" class="form-label">TAN</label>
                            <input type="text" class="form-control" id="tan"
                                [value]="applicationForm.get('tan')?.value || ''" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="gst" class="form-label">GST</label>
                            <input type="text" class="form-control" id="gst"
                                [value]="applicationForm.get('gst')?.value || ''" readonly>
                        </div>
                    </form>
                    <div style="display: flex;flex-wrap: wrap;column-gap: 1rem;">
                        <a class="btn btn-info mb-3" id="invoicePDF"
                            href="{{getSingleBillDataResponse.invoiceFileName}}" target="_blank">Invoice PDF</a>
                        <a class="btn btn-info mb-3" id="invoicePDF" href="{{getSingleBillDataResponse.panFileName}}"
                            target="_blank">PAN
                            PDF</a>
                        <a class="btn btn-info mb-3" id="invoicePDF" href="{{getSingleBillDataResponse.tanFileName}}"
                            target="_blank">TAN
                            PDF</a>
                        <a class="btn btn-info mb-3" id="invoicePDF" href="{{getSingleBillDataResponse.gstFileName}}"
                            target="_blank">GST
                            PDF</a>
                        <a class="btn btn-info mb-3" id="invoicePDF"
                            href="{{getSingleBillDataResponse.gstChallanFileName}}" target="_blank">GST
                            Invoice Challan</a>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showAE">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Assistant Engineer
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <h2 style="font-weight: bold;">Part â€“ I Work Description</h2>
                    <form [formGroup]="AEpart1Form" class="AEpart1Form">

                        <div class="mb-3">
                            <label for="reraNo" class="form-label">RERA Number</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="reraNo"
                                formControlName="reraNumber" maxlength="100">
                        </div>

                        <div class="mb-3">
                            <label for="fsValue" class="form-label">FS Value</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="fsValue"
                                formControlName="fsValue" maxlength="20">
                        </div>

                        <div class="mb-3">
                            <label for="estimateNo" class="form-label">Estimate Number</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="estimateNo"
                                formControlName="estimateNo" maxlength="50">
                        </div>

                        <div class="mb-3 mainAgreement">
                            <label class="form-label">Main Agreement No</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="mainAgreementNo"
                                    formControlName="mainAgreementNo" placeholder="Number" maxlength="50">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="mainAgreementNo"
                                    formControlName="mainAgreementValue" placeholder="Value" maxlength="20"
                                    (keyup)="calculateTotalValue()">
                            </div>
                        </div>

                        <div class="mb-3 wc79Order">
                            <label class="form-label">WC-79 Order No & Date</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="wc79OrderNo"
                                    formControlName="wc79OrderNo" placeholder="Number" maxlength="50">
                                <input [readOnly]="AEFormReadOnly" type="date" class="form-control" id="wc79OrderDate"
                                    formControlName="wc79OrderDate" maxlength="20">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="wc79OrderValue"
                                    formControlName="wc79OrderValue" placeholder="Value" maxlength="20"
                                    (keyup)="calculateTotalValue()">
                            </div>
                        </div>

                        <div class="mb-3 supplementAgreement">
                            <label class="form-label">Supplement Agreement</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                    id="supplementAgreementNo" formControlName="supplementAgreementNo"
                                    placeholder="Number" maxlength="50">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                    id="supplementAgreementNo" formControlName="supplementAgreementValue"
                                    placeholder="Value" maxlength="20" (keyup)="calculateTotalValue()">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="totalValue" class="form-label">Total
                                value</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="totalValue"
                                formControlName="totalValue" maxlength="20" readonly>
                        </div>

                        <!-- <div class="mb-3 dateOfCommencement">
                            <label for="dateOfCommencement" class="form-label">Date of
                                commencement</label>
                            <input readonly type="date" class="form-control" id="dateOfCommencement"
                                formControlName="dateOfCommencement" (change)="calculatePhysicalAchievement()">
                        </div>

                        <div class="mb-3">
                            <label for="dueDateOfCompletion" class="form-label">Due date of
                                completion</label>
                            <input readonly type="date" class="form-control" id="dueDateOfCompletion"
                                formControlName="dueDateOfCompletion" (change)="calculatePhysicalAchievement()">
                        </div> -->

                        <div class="mb-3">
                            <label for="actualDateOfCompletion" class="form-label">Actual
                                date of completion</label>
                            <input [readOnly]="AEFormReadOnly" type="date" class="form-control"
                                id="actualDateOfCompletion" formControlName="actualDateOfCompletion"
                                (change)="calculatePhysicalAchievement()">
                        </div>

                        <div class="mb-3 finalBillCompletionReportEnclosed" *ngIf="!AEFormReadOnly">
                            <label for="finalBillCompletionReportEnclosed" class="form-label">Does
                                final bill, completion report enclosed?</label>
                            <select class="form-select" formControlName="finalBillCompletionReportEnclosed">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>

                        <div class="mb-3" *ngIf="AEFormReadOnly">
                            <label for="finalBillCompletionReportEnclosed" class="form-label">Does
                                final bill, completion report enclosed?</label>
                            <input [readOnly]="AEFormReadOnly" class="form-control"
                                id="finalBillCompletionReportEnclosed"
                                formControlName="finalBillCompletionReportEnclosed">
                        </div>

                    </form>

                    <h2 style="font-weight: bold;">Part-II Bill details</h2>
                    <form [formGroup]="AEpart2Form" class="AEpart2Form">

                        <div class="mb-3 partIIDateOfMeasurement">
                            <label class="form-label">Date of
                                measurement</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input [readOnly]="AEFormReadOnly" type="date" class="form-control"
                                    id="partIIDateOfMeasurement" formControlName="dateOfMeasurementByAE">
                                <input *ngIf="!AEFormReadOnly" type="file" class="form-control"
                                    id="DateOfMeasurementFile" accept=".pdf"
                                    (change)="dataOfMeasurementFileAEChanged($event)">
                                <a mat-raised-button color="primary" *ngIf="AEFormReadOnly"
                                    href="{{getSingleBillDataResponse.dateOfMeasurementFileNameAE}}" target="_blank">
                                    PDF</a>
                            </div>
                        </div>

                        <div class="mb-3 AEpart2Form-progress">
                            <p>Whether work carried out at as per agreement</p>
                            <div style="display: flex;column-gap: 1rem;">
                                <div>
                                    <label for="physicalAchievement" class="form-label">Physical progress (%)</label>
                                    <div class="col-auto">
                                        <input readonly type="text" class="form-control" id="physicalAchievement"
                                            formControlName="physicalProgress" readonly>
                                    </div>
                                </div>
                                <div>
                                    <label for="actualPercentage" class="form-label">Actual progress (%)</label>
                                    <div class="col-auto">
                                        <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                            id="actualPercentage" formControlName="actualProgress" maxlength="5">
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="mb-3" *ngIf="!AEFormReadOnly">
                            <span class="col-3">Extension of time (EOT)</span>
                            <span class="col-auto">
                                <select class="form-select" formControlName="eot">
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </span>
                        </div>
                        <div class="mb-3" *ngIf="AEFormReadOnly">
                            <span class="col-3">Extension of time (EOT)</span>
                            <span class="col-auto">
                                <input [readOnly]="AEFormReadOnly" class="form-control" id="extensionOfTime"
                                    formControlName="eot">
                            </span>
                        </div>
                        <div class="ms-3 mb-3" *ngIf="AEpart2Form.get('eot')?.value === 'Yes'">
                            <label for="extensionOfTimeOrderNo" class="form-label">Order Number</label>
                            <div class="col-auto">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                    id="extensionOfTimeOrderNo" formControlName="eotOrderNo" maxlength="50">
                            </div>
                        </div>
                        <div class="ms-3 mb-3" *ngIf="AEpart2Form.get('eot')?.value === 'Yes'">
                            <label for="extensionOfTimeDate" class="form-label">Date</label>
                            <div class="col-auto">
                                <input [readOnly]="AEFormReadOnly" type="date" class="form-control"
                                    id="extensionOfTimeDate" formControlName="eotDate">
                            </div>
                        </div>
                        <div class="ms-3 mb-3" *ngIf="AEpart2Form.get('eot')?.value === 'Yes'">
                            <label for="extensionOfTimeFineAmount" class="form-label">Fine Amount</label>
                            <div class="col-auto">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                    id="extensionOfTimeFineAmount" formControlName="eotFineAmount" maxlength="50">
                            </div>
                        </div>

                        <div class="mb-3 liquidatedDamagesOrLumpSumFine">
                            <label for="liquidatedDamagesOrLumpSumFine" class="form-label">Liquidated damages / Lump sum
                                fine</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="liquidatedDamagesOrLumpSumFine" formControlName="liquidatedDamages" maxlength="50">
                        </div>

                        <div class="mb-3" *ngIf="!AEFormReadOnly">
                            <label for="itemsCoveredInAgreement" class="form-label">Whether
                                all items covered in original or supplemental agreement</label>
                            <select class="form-select" formControlName="whetherAllItemsCovered">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>

                        <div class="mb-3 itemsCoveredInAgreement" *ngIf="AEFormReadOnly">
                            <label for="itemsCoveredInAgreement" class="form-label">Whether
                                all items covered in original or supplemental agreement</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="itemsCoveredInAgreement" formControlName="whetherAllItemsCovered">
                        </div>

                        <div class="mb-3" *ngIf="!AEFormReadOnly">
                            <span class="col-6">Whether quantities in the bill are as per
                                estimate</span>
                            <select class="form-select" formControlName="whetherQuantitiesAsPerEstimate">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="mb-3" *ngIf="AEFormReadOnly">
                            <span class="col-6">Whether quantities in the bill are as per
                                estimate</span>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="quantitiesInBillAsPerEstimate" formControlName="whetherQuantitiesAsPerEstimate">
                        </div>
                        <div class="ms-3 mb-3"
                            *ngIf="AEpart2Form.get('whetherQuantitiesAsPerEstimate')?.value === 'No' && !AEFormReadOnly">
                            <label for="actionTakenForExcess" class="form-label">Specify action taken to
                                regularize such
                                excess</label>
                            <select class="form-select" formControlName="actionTakenToRegularizeExcess">
                                <option value="Excess Approved">Excess Approved</option>
                                <option value="Excess Not Approved">Excess Not Approved</option>
                            </select>
                        </div>
                        <div class="ms-3 mb-3"
                            *ngIf="AEpart2Form.get('whetherQuantitiesAsPerEstimate')?.value === 'No' && AEFormReadOnly">
                            <label for="actionTakenForExcess" class="form-label">Specify action taken to
                                regularize such
                                excess</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="actionTakenForExcess" formControlName="actionTakenToRegularizeExcess">
                        </div>

                        <div class="mb-3 itemsOmittedOrPartlyDone">
                            <label for="itemsOmittedOrPartlyDone" class="form-label">Have
                                any items of work in the agreement being omitted or partly done</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="itemsOmittedOrPartlyDone" formControlName="workOmittedOrPartlyDone" maxlength="50">
                        </div>

                        <div class="mb-3">
                            <label for="partRatePaidInAgreement" class="form-label">Whether
                                part rate is paid</label>
                            <div class="col-auto">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                    id="partRatePaidInAgreement" formControlName="partRatePaid" maxlength="50">
                            </div>
                        </div>

                        <div class="mb-3 computerizedMeasurementBookSubmitted" *ngIf="!AEFormReadOnly">
                            <label for="computerizedMeasurementBookSubmitted" class="form-label">Whether computerized
                                measurement book submitted?</label>
                            <select class="form-select" formControlName="measurementBookSubmitted">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        <div class="mb-3 computerizedMeasurementBookSubmitted" *ngIf="AEFormReadOnly">
                            <label for="computerizedMeasurementBookSubmitted" class="form-label">Whether computerized
                                measurement book submitted?</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="computerizedMeasurementBookSubmitted" formControlName="measurementBookSubmitted">
                        </div>

                    </form>

                    <h2 style="font-weight: bold;">Part-III Payment details</h2>
                    <form [formGroup]="AEpart3Form" class="AEpart3Form">

                        <div class="mb-3">
                            <label for="valueOfAgreement" class="form-label">Value of
                                agreement</label>
                            <input readonly type="text" class="form-control" id="valueOfAgreement"
                                formControlName="valueOfAgreement">
                        </div>

                        <div class="mb-3">
                            <label for="amountReleasedUptoPreviousBill" class="form-label">Amount
                                released upto previous bill</label>
                            <input readonly type="text" class="form-control" id="amountReleasedUptoPreviousBill"
                                formControlName="amountReleasedUptoPreviousBill" (keyup)="calculateBalance()">
                        </div>

                        <div class="mb-3">
                            <label for="balance" class="form-label">Balance</label>
                            <input readonly type="text" class="form-control" id="balance" formControlName="balance">
                        </div>

                        <div class="mb-3">
                            <label for="amountRaisedInThisBill" class="form-label">Amount
                                raised in this bill</label>
                            <input [readOnly]="AEFormReadOnly" type="text" class="form-control"
                                id="amountRaisedInThisBill" formControlName="amountRaisedInThisBill">
                        </div>

                        <div class="mb-3">
                            <label for="certificate" class="form-label">Certificate</label>
                            <textarea [readOnly]="AEFormReadOnly" type="text" class="form-control" id="certificate"
                                formControlName="certificateAE" (keyup)="aeCertificateWordCount()"
                                maxlength="1000"></textarea>
                            <div class="text-muted mt-2">
                                <small>Character Count: {{
                                    aeCertificateWordCount().characters }}/{{maxCertificateCharacters}}</small>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input [readOnly]="AEFormReadOnly" type="text" class="form-control" id="signature"
                                    formControlName="signatureAE">
                            </div>
                        </div>

                    </form>
                    <p *ngIf="AEFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionAE}}</p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showAEE">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Assistant Executive Engineer
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="AEEForm" class="AEEForm">

                        <div class="mb-3 allWorksCheckedByAEE">
                            <label for="allWorksCheckedByAEE" class="form-label">Whether
                                all the works have been check measured by AEE and date of check measurement</label>
                            <input [readOnly]="AEEFormReadOnly" type="text" class="form-control"
                                id="allWorksCheckedByAEE" formControlName="workCheckMeasuredByAEE" maxlength="255">
                        </div>

                        <div class="mb-3 preMeasurementsTaken">
                            <label for="preMeasurementsTaken" class="form-label">Whether
                                pre measurements were taken wherever necessary and check measured by AEE and
                                reference to pre measurement</label>
                            <input [readOnly]="AEEFormReadOnly" type="text" class="form-control"
                                id="preMeasurementsTaken" formControlName="measurementCheckMeasuredByAEE"
                                maxlength="255">
                        </div>

                        <div class="mb-3">
                            <label for="dateOfCheckMeasurement" class="form-label">Date of Check
                                measurement</label>
                            <input [readOnly]="AEEFormReadOnly" type="date" class="form-control"
                                id="dateOfCheckMeasurement" formControlName="dateOfCheckMeasurementAEE">
                        </div>

                        <div class="mb-3">
                            <label for="certificate" class="form-label">Certificate</label>
                            <textarea [readOnly]="AEEFormReadOnly" class="form-control" formControlName="certificateAEE"
                                id="certificate" maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="signature" class="form-label">Signature</label>
                            <input [readOnly]="AEEFormReadOnly" type="text" class="form-control" id="signature"
                                formControlName="signatureAEE" maxlength="50">
                        </div>

                    </form>
                    <p *ngIf="AEEFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionAEE}}</p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showDA">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Divisional Accountant
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="AssistantForm" class="AssistantForm">

                        <div class="correctedValue">
                            <div class="mb-3">
                                <label for="valueOfWorkDoneAsReportedByAE" class="form-label">Reported
                                    by AE<span class="ms-1">(&#8377;)</span></label>
                                <input readonly type="text" class="form-control" id="valueOfWorkDoneAsReportedByAE"
                                    formControlName="valueReportedByAE">
                            </div>
                            <div class="mb-3">
                                <label for="correctedvalue" class="form-label">Corrected
                                    Value<span class="ms-1">(&#8377;)</span></label>
                                <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                    id="correctedvalue" formControlName="correctedValueByDA"
                                    (keyup)="correctedValueCheck()">
                            </div>
                        </div>

                        <div class="mb-3 gstPercentage">
                            <label class="form-label">GST Percentage</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <div *ngIf="!AssistantFormReadOnly">
                                    <select id="dropdownSelect" class="form-select" (change)="calculateGST()"
                                        formControlName="gstPercentage">
                                        <option>Select an option</option>
                                        <option value="12">12</option>
                                        <option value="18">18</option>
                                    </select>
                                </div>

                                <div *ngIf="AssistantFormReadOnly">
                                    <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                        formControlName="gstPercentage" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">GST Value</label>
                            <input readOnly type="text" class="form-control" formControlName="gstValue" readonly>
                        </div>

                        <div class="mb-3 baseValue" *ngIf="!AssistantFormReadOnly">
                            <label for="baseValue" class="form-label">
                                <small class="accCode">
                                    <select formControlName="baseValueCode">
                                        <option value="xxx">xxx</option>
                                        <option value="yyy">yyy</option>
                                        <option value="zzz">zzz</option>
                                    </select>
                                </small>
                                Base Value
                            </label>
                            <input type="text" class="form-control" id="baseValue" formControlName="baseValue" readonly>
                        </div>

                        <div class="mb-3 baseValue" *ngIf="AssistantFormReadOnly">
                            <label for="baseValue" class="form-label"><small class="accCode">Cr.
                                    {{this.AssistantForm.get('baseValueCode')?.value}}:</small>Base Value</label>
                            <input type="text" class="form-control" id="baseValue" formControlName="baseValue" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="rmd" class="form-label"><small class="accCode">Cr. 714:</small>RMD 5%</label>
                            <input type="text" class="form-control" id="rmd" formControlName="rmdValue" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="labourFund" class="form-label"><small class="accCode">Cr. 774:</small>Labour
                                Welfare 1%</label>
                            <input type="text" class="form-control" id="labourFund" formControlName="labourFund"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label for="it" class="form-label"><small class="accCode">Cr. 731:</small>IT 2%</label>
                            <input type="text" class="form-control" id="it" formControlName="itValue" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="sgst" class="form-label"><small class="accCode">Cr. 752:</small>SGST 1%</label>
                            <input type="text" class="form-control" id="sgst" formControlName="sgstValue" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="cgst" class="form-label"><small class="accCode">Cr. 751:</small>CGST 1%</label>
                            <input type="text" class="form-control" id="cgst" formControlName="cgstValue" readonly>
                        </div>

                        <div class="mb-3">
                            <label for="steelRecovery" class="form-label"><small class="accCode">Cr. 561:</small>Steel
                                Recovery</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                id="steelRecovery" formControlName="steelRecoveryValue">
                        </div>

                        <div class="mb-3">
                            <label for="mobilization" class="form-label"><small class="accCode">Cr.
                                    571:</small>Mobilization</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control" id="mobilization"
                                formControlName="mobilizationValue">
                        </div>

                        <div class="mb-3">
                            <label for="withheldAmount" class="form-label"><small class="accCode">Cr.
                                    719:</small>Withheld amount</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                id="withheldAmount" formControlName="withheldValue">
                        </div>

                        <div class="mb-3">
                            <label for="eotfine" class="form-label"><small class="accCode">Cr. 190:</small>EOT
                                fine</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control" id="eotfine"
                                formControlName="eotValue">
                        </div>

                        <div class="mb-3">
                            <label for="otherRecoveries" class="form-label"><small class="accCode">Cr. :</small>Other
                                Recoveries</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control" id="eotfine"
                                formControlName="otherRecoveriesValue">
                        </div>

                        <div class="mb-3 otherRecoveriesRemarks">
                            <label for="otherRecoveriesRemarks" class="form-label">Other Recoveries Remarks</label>
                            <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                id="otherRecoveriesRemarks" formControlName="otherRecoveriesRemarks">
                        </div>

                        <div class="mb-3 totalDeduction">
                            <label for="totalDeduction" class="form-label">Total Deduction</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <div>
                                    <input type="text" class="form-control" id="totalDeduction"
                                        formControlName="totalDeduction" readonly>
                                </div>
                                <div *ngIf="!AssistantFormReadOnly">
                                    <button class="btn btn-primary"
                                        (click)="calculateTotalDeduction()">Calculate</button>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="netTotal" class="form-label"><small class="accCode">Cr. 701:</small>Net
                                Total</label>
                            <input type="text" class="form-control" id="totalDeduction" formControlName="netTotalValue"
                                readonly>
                        </div>

                        <div class="bill-register">
                            <h3 style="font-weight: bold;">Bill register</h3>
                            <div style="display: flex;column-gap: 1rem;">
                                <div class="mb-3">
                                    <label for="billRegisterPageNo" class="form-label">Page No</label>
                                    <input [readOnly]="AssistantFormReadOnly" type="text" class="form-control"
                                        id="billRegisterPageNo" formControlName="billRegisterPageNo">
                                </div>
                                <div class="mb-3">
                                    <label for="billRegisterDate" class="form-label">Date</label>
                                    <input [readOnly]="AssistantFormReadOnly" type="date" class="form-control"
                                        id="billRegisterDate" formControlName="billRegisterDate">
                                </div>
                            </div>
                        </div>
                    </form>

                    <form [formGroup]="DivisionalAccountantForm" class="DivisionalAccountantForm">

                        <div class="mb-3">
                            <label for="DACertificate" class="form-label">Remarks</label>
                            <textarea [readOnly]="DAFormReadOnly" class="form-control" formControlName="remarksDA"
                                id="DACertificate" maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="billPassedFor" class="form-label">Bill passed for</label>
                            <input type="text" class="form-control" id="billPassedFor" formControlName="billPassedFor"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label for="billPayFor" class="form-label">Bill pay for</label>
                            <input type="text" class="form-control" id="billPayFor" formControlName="billPayFor"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label for="daSignature" class="form-label">Signature</label>
                            <input [readOnly]="DAFormReadOnly" type="text" class="form-control" id="daSignature"
                                formControlName="signatureDA">
                        </div>

                    </form>
                    <p *ngIf="DAFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionDA}}</p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showEE">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Executive Engineer
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="EEForm" class="EEForm">

                        <div class="mb-3" style="grid-column: span 2;">
                            <label for="voucherNo" class="form-label">Voucher Number</label>
                            <div style="display: flex;column-gap: 1rem;" *ngIf="!EEFormReadOnly">
                                <input readonly type="text" class="form-control" id="voucherNo"
                                    formControlName="voucherNumber">
                                <button class="btn btn-primary" (click)="generateVoucherNo()">Generate</button>
                            </div>
                            <input readonly *ngIf="EEFormReadOnly" type="text" class="form-control" id="voucherNo"
                                formControlName="voucherNumber">
                        </div>

                        <div class="mb-3">
                            <label for="dateOfSuperCheck" class="form-label">Date of super check</label>
                            <input [readOnly]="EEFormReadOnly" type="date" class="form-control" id="dateOfSuperCheck"
                                formControlName="dateOfSuperCheck">
                        </div>

                        <div class="mb-3">
                            <label for="billPassedFor" class="form-label">Bill passed for</label>
                            <input type="text" class="form-control" id="billPassedFor" formControlName="billPassedFor"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label for="billPayFor" class="form-label">Bill pay for</label>
                            <input type="text" class="form-control" id="billPayFor" formControlName="billPayFor"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label for="eeRemarks" class="form-label">Remarks</label>
                            <textarea [readOnly]="EEFormReadOnly" class="form-control" formControlName="remarksEE"
                                id="eeRemarks" maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="eeSignature" class="form-label">Signature</label>
                            <div class="col-auto">
                                <input [readOnly]="EEFormReadOnly" type="text" class="form-control" id="eeSignature"
                                    formControlName="signatureEE">
                            </div>
                        </div>
                    </form>
                    <p *ngIf="EEFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionEE}}</p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showSE">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Superintending Engineer
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="SEForm" class="SEForm">

                        <div class="mb-3" style="grid-column: span 2;">
                            <label class="form-label">Date of Inspection</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input type="date" [readOnly]="SEFormReadOnly" class="form-control"
                                    formControlName="dateOfInspectionSE">
                                <input type="file" class="form-control" accept=".pdf" *ngIf="!SEFormReadOnly"
                                    (change)="onSEFileSelected($event)">
                                <a mat-raised-button color="primary" *ngIf="SEFormReadOnly"
                                    href="{{getSingleBillDataResponse.inspectionSEFileName}}" target="_blank">
                                    PDF</a>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <textarea [readOnly]="SEFormReadOnly" class="form-control" formControlName="remarksSE"
                                maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input [readOnly]="SEFormReadOnly" type="text" class="form-control"
                                formControlName="signatureSE">
                        </div>

                    </form>
                    <p *ngIf="SEFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionSE}}</p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showSEHQ">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Superintending Engineer (HQ)
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="SEHQForm" class="SEHQForm">

                        <div class="mb-3">
                            <label class="form-label">Recommendation of LC</label>
                            <input [readonly]="SEHQFormReadOnly" type="text" class="form-control"
                                formControlName="recommendationOfLCSEHQ">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <textarea [readonly]="SEHQFormReadOnly" class="form-control" formControlName="remarksSEHQ"
                                maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input [readonly]="SEHQFormReadOnly" type="text" class="form-control"
                                formControlName="signatureSEHQ">
                        </div>

                    </form>
                    <p *ngIf="SEHQFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionSEHQ}}
                    </p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showCE">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Chief Engineer
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="CEForm" class="CEForm">

                        <div class="mb-3" style="grid-column: span 2;">
                            <label class="form-label">Date of Inspection</label>
                            <div style="display: flex;column-gap: 1rem;">
                                <input type="date" [readOnly]="CEFormReadOnly" class="form-control"
                                    formControlName="dateOfInspectionCE">
                                <input type="file" class="form-control" accept=".pdf" *ngIf="!CEFormReadOnly"
                                    (change)="onCEFileSelected($event)">
                                <a mat-raised-button color="primary" *ngIf="CEFormReadOnly"
                                    href="{{getSingleBillDataResponse.inspectionCEFileName}}" target="_blank">
                                    PDF</a>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Recommendation of LC</label>
                            <input [readOnly]="CEFormReadOnly" type="text" class="form-control"
                                formControlName="recommendationOfLCCE">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <textarea [readOnly]="CEFormReadOnly" class="form-control" formControlName="remarksCE"
                                maxlength="1000"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input [readOnly]="CEFormReadOnly" type="text" class="form-control"
                                formControlName="signatureCE">
                        </div>

                    </form>
                    <p *ngIf="CEFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionCE}}
                    </p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showDCAO">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            DCAO
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="DCAOForm" class="DCAOForm">

                        <div class="mb-3">
                            <label class="form-label">Pass order for LC</label>
                            <input type="text" class="form-control" formControlName="passOrderForLCByDCAO"
                                [readOnly]="DCAOReadOnly">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Bank Name</label>
                            <select *ngIf="!DCAOReadOnly" class="form-select" aria-label="Bank Name"
                                formControlName="tnhbBankName" (change)="onBankNameChange()">
                                <option selected disabled>Select an option</option>
                                <option *ngFor="let account of tnhbBankAccounts" [value]="account.bankName">{{
                                    account.bankName }}</option>
                            </select>
                            <input *ngIf="DCAOReadOnly" type="text" class="form-control" formControlName="tnhbBankName"
                                readonly>
                        </div>

                        <div class="mb-3" *ngIf="dcaoBankFields">
                            <label for="accountNumber" class="form-label">Account Number</label>
                            <input type="text" class="form-control" id="accountNumber" formControlName="tnhbAccountNo"
                                readonly>
                        </div>

                        <div class="mb-3" *ngIf="dcaoBankFields">
                            <label for="accountHolder" class="form-label">Account Holder</label>
                            <input type="text" class="form-control" id="accountHolder"
                                formControlName="tnhbAccountHolderName" readonly>
                        </div>

                        <div class="mb-3" *ngIf="dcaoBankFields">
                            <label for="bankBranch" class="form-label">Branch</label>
                            <input type="text" class="form-control" id="bankBranch" formControlName="tnhbBranchName"
                                readonly>
                        </div>

                        <div class="mb-3" *ngIf="dcaoBankFields">
                            <label for="ifscCode" class="form-label">IFSC Code</label>
                            <input type="text" class="form-control" id="ifscCode" formControlName="tnhbBankIfscCode"
                                readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input type="text" class="form-control" formControlName="signatureDCAO"
                                [readOnly]="DCAOReadOnly">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <textarea class="form-control" formControlName="remarksDCAO"
                                [readOnly]="DCAOReadOnly"></textarea>
                        </div>

                    </form>
                    <p *ngIf="DCAOReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionDCAO}}
                    </p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showFA">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Financial Advisor
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="FAForm" class="FAForm">

                        <div class="mb-3" *ngIf="!FAReadOnly">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" formControlName="faApproval" id="approve"
                                    value="Approve">
                                <label class="form-check-label" for="approve">
                                    Approve
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" formControlName="faApproval" id="reject"
                                    value="Reject" checked>
                                <label class="form-check-label" for="reject">
                                    Reject
                                </label>
                            </div>
                        </div>

                        <div class="mb-3" *ngIf="FAReadOnly">
                            <label class="form-label">Approval Status</label>
                            <input type="text" class="form-control" formControlName="faApproval" readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">LC Issued Order</label>
                            <input type="text" class="form-control" formControlName="passOrderForLCByFA"
                                [readonly]="FAReadOnly">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input type="text" class="form-control" formControlName="signatureFA"
                                [readonly]="FAReadOnly">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <textarea class="form-control" formControlName="remarksFA"
                                [readonly]="FAReadOnly"></textarea>
                        </div>

                    </form>
                    <p *ngIf="FAReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionFA}}
                    </p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="showMD">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            Managing Director
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="MDForm" class="MDForm">

                        <div class="mb-3">
                            <label class="form-label">Remarks</label>
                            <input type="text" class="form-control" formControlName="remarksMD"
                                [readOnly]="MDFormReadOnly">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Signature</label>
                            <input type="text" class="form-control" formControlName="signatureMD"
                                [readOnly]="MDFormReadOnly">
                        </div>

                    </form>
                    <p *ngIf="MDFormReadOnly">Date of Submission: {{getSingleBillDataResponse.dateOfSubmissionMD}}
                    </p>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <div style="margin-bottom: 10px;" *ngIf="mdprocessed === 'true'">
            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState" (closed)="panelOpenState">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: 1.2rem;">
                            DCAO
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <form class="DCAOForm2">
                        <div class="mb-3">
                            <label class="form-label">Payment Bank</label>
                            <input type="text" class="form-control" value="{{getSingleBillDataResponse.tnhbBankName}}"
                                readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Bank Balance</label>
                            <input type="text" class="form-control" value="{{bankBalanceResponse.netBalance}}" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Processing Amount</label>
                            <input type="text" class="form-control" value="{{getSingleBillDataResponse.billPayFor}}"
                                readonly>
                        </div>
                    </form>

                    <div class="mb-3">
                        <button mat-raised-button style="background-color: #304D30;color: #ffffff;"
                            (click)="payVendor()">Pay Vendor</button>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>

        <br>
        <div style="text-align: right;">
            <button mat-raised-button style="background-color: #0802A3;color: #ffffff;" (click)="saveNewBill()"
                [disabled]="updateDisable">Update</button>
        </div>
    </section>
</main>